{
    "listeners": {
      "*:8080": {
        "pass": "applications/routes"
      }
    },
    "routes": [
      {
        "match": {
          "uri": "^/api/"
        },
        "action": {
          "pass": "applications/python_app"
        }
      },
      {
        "action": {
          "pass": "applications/react_app"
        }
      }
    ],
    "applications": {
      "react_app": {
        "type": "static",
        "root": "/app/build",
        "index": "index.html",
        "try_files": ["$uri", "/index.html"]
      },
      "python_app": {
        "type": "python",
        "path": "/app/www/src",
        "module": "app",
        "callable": "app"
      },
      "index": {
        "type": "static",
        "root": "/app/build",
        "index": "index.html",
        "try_files": ["$uri", "/index.html"]
      }
    }
  }
  